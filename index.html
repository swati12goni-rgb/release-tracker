<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Release Tracker</title>
<style>
    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        margin:0;
        padding:0;
        background:#f4f6f8;
        color:#333;
    }
    header {
        background:#2F4F4F;
        color:white;
        padding:20px 0;
        text-align:center;
        box-shadow:0 2px 5px rgba(0,0,0,0.1);
    }
    header h1 { margin:0; font-size:28px; letter-spacing:1px; }
    main {
        padding:20px;
        max-width:1200px;
        margin:auto;
    }
    table {
        width:100%;
        border-collapse:collapse;
        background:#fff;
        box-shadow:0 2px 5px rgba(0,0,0,0.1);
    }
    th, td {
        padding:12px 15px;
        border:1px solid #ddd;
        font-size:14px;
    }
    th { background:#2F4F4F; color:white; text-align:center; }
    td { text-align:left; }
    td input, td select {
        width: 100%;
        padding:5px;
        font-size:14px;
        border:1px solid #ccc;
        border-radius:4px;
        box-sizing:border-box;
    }
    td.action button {
        margin: 2px;
        padding:5px 10px;
        background:#2F4F4F;
        color:white;
        border:none;
        border-radius:4px;
        cursor:pointer;
    }
    td.action button:hover { background:#556B2F; }
    footer {
        background:#2F4F4F;
        color:white;
        text-align:center;
        padding:15px 0;
        margin-top:40px;
        font-size:14px;
        letter-spacing:0.5px;
    }
    #addRowBtn {
        margin-top:15px;
        padding:8px 15px;
        background:#2F4F4F;
        color:white;
        border:none;
        border-radius:4px;
        cursor:pointer;
        font-weight:600;
        transition:0.3s;
    }
    #addRowBtn:hover { background:#556B2F; }
</style>
</head>
<body>

<header>
    <h1>Release Tracker</h1>
</header>

<main>
    <table id="buildTable">
        <thead>
            <tr>
                <th>Date</th>
                <th>Build</th>
                <th>Description</th>
                <th>Platform</th>
                <th>Note</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    <button id="addRowBtn" onclick="addRow()">Add New Row</button>
</main>

<footer>
    &copy; 2025 Release Tracker. All Rights Reserved.
</footer>

<script>
const API_URL = "YOUR_GOOGLE_SCRIPT_WEBAPP_URL"; // replace with your script URL

window.onload = loadData;

function addRow(rowData = null) {
    const tableBody = document.getElementById('buildTable').querySelector('tbody');
    const row = tableBody.insertRow();

    const dateCell = row.insertCell();
    const buildCell = row.insertCell();
    const descCell = row.insertCell();
    const platformCell = row.insertCell();
    const noteCell = row.insertCell();
    const actionCell = row.insertCell();

    if (rowData) {
        fillRow(row, rowData);
    } else {
        makeEditable(row, true);
    }
}

function makeEditable(row, isNew = false, rowData = {}) {
    const cells = row.cells;

    cells[0].innerHTML = `<input type="date" value="${rowData.date || ''}">`;
    cells[1].innerHTML = `<input type="text" placeholder="Enter Build" value="${rowData.build || ''}">`;
    cells[2].innerHTML = `<input type="text" placeholder="Enter Description" value="${rowData.desc || ''}">`;

    const platforms = [
        "COMCAST-1217563", "COX-1217568", "PLATCO-1217572",
        "ROGERS-1217570", "SHAW-1217571", "VIZIO-1217562",
        "SAMSUNG-1217555", "LG-1217569", "XBOX-1217569",
        "WINDOWS-1217556", "VIDAA-1217574"
    ];
    let options = platforms.map(p => `<option value="${p}" ${rowData.platform === p ? "selected" : ""}>${p}</option>`).join('');
    cells[3].innerHTML = `<select>${options}</select>`;

    cells[4].innerHTML = `<input type="text" placeholder="Enter Note" value="${rowData.note || ''}">`;

    const actionCell = cells[5];
    actionCell.innerHTML = '';

    const saveBtn = document.createElement('button');
    saveBtn.textContent = isNew ? "Save" : "Update";
    saveBtn.onclick = async () => {
        const data = {
            date: cells[0].querySelector('input').value,
            build: cells[1].querySelector('input').value,
            desc: cells[2].querySelector('input').value,
            platform: cells[3].querySelector('select').value,
            note: cells[4].querySelector('input').value
        };
        await saveData(data);
        location.reload();
    };
    actionCell.appendChild(saveBtn);
}

function fillRow(row, data) {
    row.cells[0].textContent = data[0];
    row.cells[1].textContent = data[1];
    row.cells[2].textContent = data[2];
    row.cells[3].textContent = data[3];
    row.cells[4].textContent = data[4];

    const actionCell = row.cells[5];
    actionCell.innerHTML = '';

    const deleteBtn = document.createElement('button');
    deleteBtn.textContent = "Delete";
    deleteBtn.onclick = () => {
        row.remove();
    };
    actionCell.appendChild(deleteBtn);
}

async function saveData(data) {
    await fetch(API_URL, {
        method: "POST",
        body: JSON.stringify(data)
    });
}

async function loadData() {
    const res = await fetch(API_URL);
    const data = await res.json();
    data.slice(1).forEach(row => addRow(row));
}
</script>

</body>
</html>
